(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{451:function(t,s,a){"use strict";a.r(s);var e=a(2),r=Object(e.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"title"}),s("p",[t._v("Docker容器Tag")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",[s("code",[t._v("MinIO/MinIO\n\nnginx\n")])])])]),s("h1",{attrs:{id:"部署-minio"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#部署-minio"}},[t._v("#")]),t._v(" 部署 MinIO")]),t._v(" "),s("p",[t._v("MinIO默认后台管理界面: "),s("strong",[s("a",{attrs:{href:"http://0.0.0.0:9900",target:"_blank",rel:"noopener noreferrer"}},[t._v("http://0.0.0.0:9900"),s("OutboundLink")],1)])]),t._v(" "),s("p",[t._v("MinIO API: "),s("strong",[s("a",{attrs:{href:"http://0.0.0.0:9000",target:"_blank",rel:"noopener noreferrer"}},[t._v("http://0.0.0.0:9000"),s("OutboundLink")],1)])]),t._v(" "),s("p",[t._v("例如下载"),s("code",[t._v("oss bucket")]),t._v("中的"),s("code",[t._v("demo.pptx")]),t._v("文件")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",[s("code",[t._v("http://0.0.0.0:9000/oss/demo.pptx\n")])])]),s("div",{staticClass:"custom-block danger"},[s("p",{staticClass:"title"}),s("p",[t._v("由于API接口为http请求，在https页面中不可用.")]),t._v(" "),s("p",[t._v("因此使用Nginx进行反向代理，使得可以在https页面发起https请求访问MinIO.")])]),s("h1",{attrs:{id:"nginx-配置步骤"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#nginx-配置步骤"}},[t._v("#")]),t._v(" Nginx 配置步骤")]),t._v(" "),s("h2",{attrs:{id:"配置一个-nginx-容器"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#配置一个-nginx-容器"}},[t._v("#")]),t._v(" 配置一个 Nginx 容器")]),t._v(" "),s("h3",{attrs:{id:"映射容器端口"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#映射容器端口"}},[t._v("#")]),t._v(" 映射容器端口")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("本地端口")]),t._v(" "),s("th",[t._v("容器端口")]),t._v(" "),s("th",[t._v("类型")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("9443")]),t._v(" "),s("td",[t._v("443")]),t._v(" "),s("td",[t._v("tcp")])]),t._v(" "),s("tr",[s("td",[t._v("9880")]),t._v(" "),s("td",[t._v("80")]),t._v(" "),s("td",[t._v("tcp")])])])]),t._v(" "),s("h3",{attrs:{id:"映射容器目录"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#映射容器目录"}},[t._v("#")]),t._v(" 映射容器目录")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("本地文件夹")]),t._v(" "),s("th",[t._v("容器文件夹")]),t._v(" "),s("th",[t._v("类型")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("docker/nginx-oss")]),t._v(" "),s("td",[t._v("/etc/nginx")]),t._v(" "),s("td",[t._v("rw")])])])]),t._v(" "),s("h2",{attrs:{id:"准备一个域名-并下载ssl证书"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#准备一个域名-并下载ssl证书"}},[t._v("#")]),t._v(" 准备一个域名，并下载SSL证书")]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"title"}),s("h3",{attrs:{id:"域名-oss-demo-cloud"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#域名-oss-demo-cloud"}},[t._v("#")]),t._v(" 域名: oss.demo.cloud")]),t._v(" "),s("h3",{attrs:{id:"证书-oss-demo-cloud-pem"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#证书-oss-demo-cloud-pem"}},[t._v("#")]),t._v(" 证书: oss-demo-cloud.pem")]),t._v(" "),s("h3",{attrs:{id:"密钥-oss-demo-cloud-key"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#密钥-oss-demo-cloud-key"}},[t._v("#")]),t._v(" 密钥: oss-demo-cloud.key")])]),s("h2",{attrs:{id:"配置-nginx-的配置文件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#配置-nginx-的配置文件"}},[t._v("#")]),t._v(" 配置 Nginx 的配置文件")]),t._v(" "),s("h3",{attrs:{id:"进入-docker-nginx-oss-目录"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#进入-docker-nginx-oss-目录"}},[t._v("#")]),t._v(" 进入 docker/nginx-oss 目录")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",[s("code",[t._v("/etc/nginx/                                                                                                                                \n|-- fastcgi_params                                                              \n|-- mime.types                                                                  \n|-- nginx.conf                                                                  \n|-- scgi_params                                                                 \n`-- uwsgi_params \n")])])]),s("h3",{attrs:{id:"创建-cert-目录-并将证书及密钥放入-cert-目录中"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#创建-cert-目录-并将证书及密钥放入-cert-目录中"}},[t._v("#")]),t._v(" 创建 cert 目录，并将证书及密钥放入 cert 目录中")]),t._v(" "),s("h3",{attrs:{id:"创建-conf-d-目录-并创建-default-conf-文件-编写配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#创建-conf-d-目录-并创建-default-conf-文件-编写配置"}},[t._v("#")]),t._v(" 创建 conf.d 目录，并创建 default.conf 文件，编写配置")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",[s("code",[t._v("server {\nlisten       80;\nlisten  [::]:80;\nlisten 443 ssl;\nserver_name oss.demo.cloud;\nssl_certificate /etc/nginx/cert/oss-demo-cloud.pem;\nssl_certificate_key /etc/nginx/cert/oss-demo-cloud.key;\nssl_protocols TLSv1 TLSv1.1 TLSv1.2;\nssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:HIGH:!aNULL:!MD5:!RC4:!DHE;\nssl_prefer_server_ciphers on;\n\nlocation / {\n    root   /usr/share/nginx/html;\n    index  index.html index.htm;\n    proxy_pass http://oss.demo.cloud:9000;\n    proxy_set_header  Host       $host;\n    proxy_set_header  X-Real-IP    $remote_addr;\n    proxy_set_header  X-Forwarded-For $proxy_add_x_forwarded_for;\n}\n\nerror_page  404              /404.html;\n\nerror_page  500 502 503 504  /50x.html;\nlocation = /50x.html {\n    root   /usr/share/nginx/html;\n    }\n}\n")])])]),s("h3",{attrs:{id:"完成后的目录结构如下"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#完成后的目录结构如下"}},[t._v("#")]),t._v(" 完成后的目录结构如下")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",[s("code",[t._v("/etc/nginx/                                                                     \n|-- cert                                                                        \n|   |-- oss-demo-cloud.key                                                                 \n|   `-- oss-demo-cloud.pem                                                                 \n|-- conf.d                                                                      \n|   `-- default.conf                                                            \n|-- fastcgi_params                                                              \n|-- mime.types                                                                  \n|-- nginx.conf                                                                  \n|-- scgi_params                                                                 \n`-- uwsgi_params \n")])])]),s("h3",{attrs:{id:"运行-nginx-容器"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#运行-nginx-容器"}},[t._v("#")]),t._v(" 运行 Nginx 容器")]),t._v(" "),s("h2",{attrs:{id:"测试在-https-页面中使用-minio-访问存储对象"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#测试在-https-页面中使用-minio-访问存储对象"}},[t._v("#")]),t._v(" 测试在 https 页面中使用 MinIO 访问存储对象")]),t._v(" "),s("h3",{attrs:{id:"新建一个-html-页面-设置-video-标签的-src-为-oss-中的文件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#新建一个-html-页面-设置-video-标签的-src-为-oss-中的文件"}},[t._v("#")]),t._v(" 新建一个 Html 页面，设置 video 标签的 src 为 OSS 中的文件")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",[s("code",[t._v('<!DOCTYPE html>\n<html lang="en">\n<head>\n    <meta charset="UTF-8">\n    <title>OSS测试</title>\n</head>\n<style>\n\tbody{\n\t\tmargin:0;\n\t\tpadding:0;\n\t\tbackground-color:black;\n\t}\n\tvideo{\n\t\twidth:100vw;\n\t\theight:100vh;\n\t}\n</style>\n<body>\n    <video src="https://oss.demo.cloud:9443/oss/test.mp4" muted autoplay>Video For Test</video>\n</body>\n</html>\n')])])]),s("h3",{attrs:{id:"如果能正常播放-则配置成功"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#如果能正常播放-则配置成功"}},[t._v("#")]),t._v(" 如果能正常播放，则配置成功.")])])}),[],!1,null,null,null);s.default=r.exports}}]);